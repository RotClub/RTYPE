---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by yamo.
--- DateTime: 17/12/2024 11:54
---

local function check_index(symbol_name, symbol_function)
    if symbol_name == '__index' then
        print("INSIDE __index")
        for a, b in pairs(symbol_function) do
            print(a, b)
            check_index(a, b)
        end
        print("END INSIDE __index")
    end
end

local function printMetatable(node)
    print(node.__name)
    for k, j in pairs(getmetatable(node).__index) do
        print(k, j)
        check_index(k, j)
    end
end

root:CreateChild("Node2D", "node_two")
root:CreateChild("Sprite2D", "iamasprite", "image.png")

print("\nPRINTING ROOT")
print(root.__name, root:GetName())
for k, j in pairs(getmetatable(root).__index) do
    print(k, j)
    check_index(k, j)
end
print("END PRINTING ROOT \n")

print("PRINTING CHILDREN")

for _, v in ipairs(root:GetChildren()) do
    printMetatable(v)
    print("----------")
end
print("END PRINTING CHILDREN\n")

-- Add a child Node
local node = root:CreateChild("Node", "node1")

---- Directly call NodeMetaTable methods
print("Should be node1 -> ", node:GetName())  -- Works as expected (prints "node1")
node:SetName("new_name")
print("Should be new_name -> ", node:GetName())  -- Works as expected (prints "new_name")

---- Add a Node2D child
local sprite = root:CreateChild("Node2D", "sprite")

-- Directly call Node2DMetaTable methods
print("Should be 0, 0 -> ", sprite:GetPosition())  -- Works as expected (prints 0, 0)
sprite:SetPosition(100, 200)
print("Should be 100, 200 -> ", sprite:GetPosition(), "\n")  -- Works as expected (prints 100, 200)
